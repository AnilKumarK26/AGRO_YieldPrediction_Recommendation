<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krishi AI - Advanced Crop Yield Prediction Platform</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-green: #10b981;
            --primary-blue: #3b82f6;
            --primary-purple: #8b5cf6;
            --secondary-amber: #f59e0b;
        }
        
        * {
            scroll-behavior: smooth;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .gradient-green {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .gradient-blue {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        }
        
        .gradient-purple {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        }
        
        .gradient-amber {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        
        .loading-spinner {
            border: 4px solid rgba(103, 126, 234, 0.2);
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 0.8s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .animate-slide-in {
            animation: slideIn 0.5s ease-out forwards;
        }
        
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }
        
        .stat-card {
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            transition: all 0.5s;
        }
        
        .stat-card:hover::before {
            top: -100%;
            right: -100%;
        }
        
        .trend-up { color: #10b981; }
        .trend-down { color: #ef4444; }
        .trend-stable { color: #6b7280; }
        
        .priority-high {
            border-left: 4px solid #ef4444;
            background-color: #fef2f2;
        }
        
        .priority-medium {
            border-left: 4px solid #f59e0b;
            background-color: #fffbeb;
        }
        
        .priority-low {
            border-left: 4px solid #10b981;
            background-color: #f0fdf4;
        }
        
        .market-score-bar {
            background: linear-gradient(90deg, #ef4444 0%, #f59e0b 50%, #10b981 100%);
            height: 12px;
            border-radius: 6px;
            position: relative;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .score-indicator {
            position: absolute;
            width: 6px;
            height: 20px;
            background: #1f2937;
            border-radius: 3px;
            top: -4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            min-width: 300px;
            max-width: 400px;
            animation: slideIn 0.3s ease-out;
        }
        
        .pulse-dot {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(103, 126, 234, 0.1);
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            background-color: #1f2937;
            color: #fff;
            text-align: center;
            padding: 8px 12px;
            border-radius: 6px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            white-space: nowrap;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        .tab-active {
            border-bottom: 3px solid #667eea;
            color: #667eea;
            font-weight: 600;
        }
        
        .progress-bar {
            height: 4px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 2px;
            transition: width 0.3s ease;
        }
        
        @media (max-width: 768px) {
            .notification {
                left: 10px;
                right: 10px;
                min-width: auto;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <nav class="gradient-bg text-white shadow-2xl sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <div class="bg-white bg-opacity-20 p-2 rounded-lg">
                        <i class="fas fa-seedling text-3xl"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold">Krishi AI</h1>
                        <p class="text-xs text-white text-opacity-80">Smart Agriculture Platform</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="langToggle" class="bg-white bg-opacity-20 px-4 py-2 rounded-lg hover:bg-opacity-30 transition flex items-center space-x-2">
                        <i class="fas fa-language"></i>
                        <span>‡§π‡§ø‡§Ç‡§¶‡•Ä/English</span>
                    </button>
                    <div class="tooltip">
                        <button class="bg-white bg-opacity-20 p-2 rounded-lg hover:bg-opacity-30 transition">
                            <i class="fas fa-bell"></i>
                        </button>
                        <span class="tooltiptext">Notifications</span>
                    </div>
                </div>
            </div>
        </div>
        <div id="progressBar" class="progress-bar" style="width: 0%;"></div>
    </nav>

    <!-- Hero Section -->
    <div class="container mx-auto px-6 py-12">
        <div class="text-center mb-12 animate-slide-in">
            <h2 class="text-5xl font-bold text-gray-800 mb-4" data-en="AI-Powered Crop Yield Prediction & Market Analysis" data-hi="‡§è‡§Ü‡§à-‡§∏‡§Ç‡§ö‡§æ‡§≤‡§ø‡§§ ‡§´‡§∏‡§≤ ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§® ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§® ‡§î‡§∞ ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£">
                AI-Powered Crop Yield Prediction & Market Analysis
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto" data-en="Get accurate yield predictions, personalized farming recommendations, and real-time market intelligence to maximize your agricultural profits" data-hi="‡§Ö‡§™‡§®‡•á ‡§ï‡•É‡§∑‡§ø ‡§≤‡§æ‡§≠ ‡§ï‡•ã ‡§Ö‡§ß‡§ø‡§ï‡§§‡§Æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§ü‡•Ä‡§ï ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§® ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®, ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§ï‡•É‡§∑‡§ø ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂‡•á‡§Ç ‡§î‡§∞ ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï ‡§∏‡§Æ‡§Ø ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§¨‡•Å‡§¶‡•ç‡§ß‡§ø‡§Æ‡§§‡•ç‡§§‡§æ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç">
                Get accurate yield predictions, personalized farming recommendations, and real-time market intelligence to maximize your agricultural profits
            </p>
            
            <!-- Feature Highlights -->
            <div class="grid md:grid-cols-4 gap-4 mt-8 max-w-4xl mx-auto">
                <div class="bg-white p-4 rounded-lg shadow-md">
                    <i class="fas fa-brain text-purple-600 text-2xl mb-2"></i>
                    <p class="text-sm font-semibold">AI Predictions</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-md">
                    <i class="fas fa-chart-line text-green-600 text-2xl mb-2"></i>
                    <p class="text-sm font-semibold">Market Trends</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-md">
                    <i class="fas fa-leaf text-blue-600 text-2xl mb-2"></i>
                    <p class="text-sm font-semibold">Smart Farming</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-md">
                    <i class="fas fa-database text-amber-600 text-2xl mb-2"></i>
                    <p class="text-sm font-semibold">Real Data</p>
                </div>
            </div>
        </div>

        <!-- Input Form -->
        <div class="max-w-5xl mx-auto bg-white rounded-2xl shadow-2xl p-8 mb-8 animate-slide-in">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-3xl font-bold text-gray-800 flex items-center">
                    <i class="fas fa-seedling text-green-600 mr-3"></i>
                    <span data-en="Crop Analysis Form" data-hi="‡§´‡§∏‡§≤ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§´‡•â‡§∞‡•ç‡§Æ">Crop Analysis Form</span>
                </h3>
                <div class="flex items-center space-x-2">
                    <span class="pulse-dot w-2 h-2 bg-green-500 rounded-full"></span>
                    <span class="text-sm text-gray-600">Live Analysis</span>
                </div>
            </div>
            
            <form id="predictionForm" class="space-y-6">
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Location Section -->
                    <div class="space-y-4">
                        <div class="flex items-center space-x-2 mb-3">
                            <i class="fas fa-map-marker-alt text-blue-600"></i>
                            <h4 class="text-lg font-semibold text-gray-700" data-en="Location Details" data-hi="‡§∏‡•ç‡§•‡§æ‡§® ‡§µ‡§ø‡§µ‡§∞‡§£">Location Details</h4>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-en="State *" data-hi="‡§∞‡§æ‡§ú‡•ç‡§Ø *">State *</label>
                            <select id="state" name="state" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg transition-all">
                                <option value="">Select State</option>
                                <option value="odisha">üåæ Odisha (‡§ì‡§°‡§ø‡§∂‡§æ)</option>
                                <option value="andhra pradesh">üåæ Andhra Pradesh (‡§Ü‡§Ç‡§ß‡•ç‡§∞ ‡§™‡•ç‡§∞‡§¶‡•á‡§∂)</option>
                                <option value="telangana">üåæ Telangana (‡§§‡•á‡§≤‡§Ç‡§ó‡§æ‡§®‡§æ)</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-en="District *" data-hi="‡§ú‡§ø‡§≤‡§æ *">District *</label>
                            <input type="text" id="district" name="district" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg transition-all" placeholder="e.g., Cuttack, Guntur">
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-en="Latitude *" data-hi="‡§Ö‡§ï‡•ç‡§∑‡§æ‡§Ç‡§∂ *">Latitude *</label>
                                <input type="number" id="latitude" name="latitude" step="0.000001" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg transition-all" placeholder="20.2961">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2" data-en="Longitude *" data-hi="‡§¶‡•á‡§∂‡§æ‡§Ç‡§§‡§∞ *">Longitude *</label>
                                <input type="number" id="longitude" name="longitude" step="0.000001" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg transition-all" placeholder="85.8245">
                            </div>
                        </div>
                        
                        <button type="button" id="getCurrentLocation" class="w-full bg-green-500 text-white px-4 py-3 rounded-lg hover:bg-green-600 transition flex items-center justify-center space-x-2">
                            <i class="fas fa-location-crosshairs"></i>
                            <span data-en="Use My Current Location" data-hi="‡§Æ‡•á‡§∞‡§æ ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§∏‡•ç‡§•‡§æ‡§® ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç">Use My Current Location</span>
                        </button>
                        <div id="locationStatus" class="text-sm text-center"></div>
                    </div>

                    <!-- Crop & Farm Details -->
                    <div class="space-y-4">
                        <div class="flex items-center space-x-2 mb-3">
                            <i class="fas fa-tractor text-green-600"></i>
                            <h4 class="text-lg font-semibold text-gray-700" data-en="Crop & Farm Details" data-hi="‡§´‡§∏‡§≤ ‡§î‡§∞ ‡§ñ‡•á‡§§ ‡§µ‡§ø‡§µ‡§∞‡§£">Crop & Farm Details</h4>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-en="Crop Type *" data-hi="‡§´‡§∏‡§≤ ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ *">Crop Type *</label>
                            <select id="cropType" name="crop_type" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg transition-all">
                                <option value="">Select Crop</option>
                                <option value="rice">üåæ Rice (‡§ö‡§æ‡§µ‡§≤)</option>
                                <option value="wheat">üåæ Wheat (‡§ó‡•á‡§π‡•Ç‡§Ç)</option>
                                <option value="cotton">üå± Cotton (‡§ï‡§™‡§æ‡§∏)</option>
                                <option value="maize">üåΩ Maize (‡§Æ‡§ï‡•ç‡§ï‡§æ)</option>
                                <option value="sugarcane">üéã Sugarcane (‡§ó‡§®‡•ç‡§®‡§æ)</option>
                                <option value="groundnut">ü•ú Groundnut (‡§Æ‡•Ç‡§Ç‡§ó‡§´‡§≤‡•Ä)</option>
                                <option value="soybean">ü´ò Soybean (‡§∏‡•ã‡§Ø‡§æ‡§¨‡•Ä‡§®)</option>
                                <option value="turmeric">üåø Turmeric (‡§π‡§≤‡•ç‡§¶‡•Ä)</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-en="Land Area (Hectares) *" data-hi="‡§≠‡•Ç‡§Æ‡§ø ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ (‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞) *">Land Area (Hectares) *</label>
                            <input type="number" id="areaHectares" name="area_hectares" step="0.01" min="0.01" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg transition-all" placeholder="2.5">
                            <p class="text-xs text-gray-500 mt-1">1 acre = 0.4047 hectares</p>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-en="Fertilizer Applied (kg/hectare) *" data-hi="‡§â‡§∞‡•ç‡§µ‡§∞‡§ï ‡§≤‡§ó‡§æ‡§Ø‡§æ (‡§ï‡§ø‡§ó‡•ç‡§∞‡§æ/‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞) *">Fertilizer Applied (kg/hectare) *</label>
                            <input type="number" id="fertilizer" name="fertilizer" min="0" step="0.1" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg transition-all" placeholder="50">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-en="Pesticide Applied (kg/hectare) *" data-hi="‡§ï‡•Ä‡§ü‡§®‡§æ‡§∂‡§ï ‡§≤‡§ó‡§æ‡§Ø‡§æ (‡§ï‡§ø‡§ó‡•ç‡§∞‡§æ/‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞) *">Pesticide Applied (kg/hectare) *</label>
                            <input type="number" id="pesticide" name="pesticide" min="0" step="0.1" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg transition-all" placeholder="5">
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="text-center pt-4">
                    <button type="submit" id="predictBtn" class="gradient-bg text-white px-12 py-4 rounded-xl hover:shadow-2xl transition-all text-lg font-bold inline-flex items-center space-x-3">
                        <i class="fas fa-brain"></i>
                        <span data-en="Analyze Crop & Generate Insights" data-hi="‡§´‡§∏‡§≤ ‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§ï‡§∞‡•á‡§Ç">Analyze Crop & Generate Insights</span>
                        <i class="fas fa-arrow-right"></i>
                    </button>
                    
                    <div id="loadingIndicator" class="hidden mt-6 flex flex-col items-center justify-center">
                        <div class="loading-spinner mb-4"></div>
                        <p class="text-gray-600 font-medium" data-en="Analyzing environmental data and generating AI predictions..." data-hi="‡§™‡§∞‡•ç‡§Ø‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø ‡§°‡•á‡§ü‡§æ ‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§î‡§∞ ‡§è‡§Ü‡§à ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§® ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...">
                            Analyzing environmental data and generating AI predictions...
                        </p>
                        <div class="mt-2 flex space-x-2 text-sm text-gray-500">
                            <span>üåç Fetching soil data</span>
                            <span>üå§Ô∏è Analyzing weather</span>
                            <span>ü§ñ AI processing</span>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <!-- Results Section -->
        <div id="resultsSection" class="hidden max-w-7xl mx-auto space-y-8">
            <!-- Main Stats -->
            <div class="grid md:grid-cols-3 gap-6 animate-slide-in">
                <div class="stat-card gradient-green text-white p-8 rounded-2xl shadow-2xl card-hover">
                    <div class="flex items-center justify-between mb-4">
                        <i class="fas fa-leaf text-5xl opacity-80"></i>
                        <div class="bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm">Per Hectare</div>
                    </div>
                    <h4 class="text-lg font-semibold opacity-90" data-en="Predicted Yield" data-hi="‡§Ö‡§®‡•Å‡§Æ‡§æ‡§®‡§ø‡§§ ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®">Predicted Yield</h4>
                    <p id="yieldPerHectare" class="text-4xl font-bold mt-2">-- quintals</p>
                    <div class="mt-4 text-sm opacity-80" data-en="Based on environmental analysis" data-hi="‡§™‡§∞‡•ç‡§Ø‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞">Based on environmental analysis</div>
                </div>
                
                <div class="stat-card gradient-blue text-white p-8 rounded-2xl shadow-2xl card-hover">
                    <div class="flex items-center justify-between mb-4">
                        <i class="fas fa-weight-hanging text-5xl opacity-80"></i>
                        <div class="bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm">Total</div>
                    </div>
                    <h4 class="text-lg font-semibold opacity-90" data-en="Total Production" data-hi="‡§ï‡•Å‡§≤ ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®">Total Production</h4>
                    <p id="totalProduction" class="text-4xl font-bold mt-2">-- quintals</p>
                    <div class="mt-4 text-sm opacity-80" data-en="Across all land area" data-hi="‡§∏‡§≠‡•Ä ‡§≠‡•Ç‡§Æ‡§ø ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§Æ‡•á‡§Ç">Across all land area</div>
                </div>
                
                <div class="stat-card gradient-purple text-white p-8 rounded-2xl shadow-2xl card-hover">
                    <div class="flex items-center justify-between mb-4">
                        <i class="fas fa-rupee-sign text-5xl opacity-80"></i>
                        <div class="bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm">Market Value</div>
                    </div>
                    <h4 class="text-lg font-semibold opacity-90" data-en="Estimated Revenue" data-hi="‡§Ö‡§®‡•Å‡§Æ‡§æ‡§®‡§ø‡§§ ‡§∞‡§æ‡§ú‡§∏‡•ç‡§µ">Estimated Revenue</h4>
                    <p id="estimatedValue" class="text-4xl font-bold mt-2">‚Çπ --</p>
                    <div class="mt-4 text-sm opacity-80" data-en="At current market rates" data-hi="‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§¶‡§∞‡•ã‡§Ç ‡§™‡§∞">At current market rates</div>
                </div>
            </div>

            <!-- Real Market Data Indicator - NEW -->
            <div class="bg-gradient-to-r from-green-100 to-emerald-100 border-l-4 border-green-500 p-5 mb-6 rounded-lg shadow-md animate-slide-in">
                <div class="flex items-center">
                    <div class="bg-green-500 text-white rounded-full p-3 mr-4">
                        <i class="fas fa-check-circle text-2xl"></i>
                    </div>
                    <div class="flex-1">
                        <p class="font-bold text-green-900 text-lg">Real-Time Market Data</p>
                        <p class="text-sm text-green-800">
                            Price data from: <span id="priceDataSource" class="font-semibold"></span>
                            <span class="mx-2">‚Ä¢</span>
                            <span id="priceLastUpdated" class="text-xs"></span>
                        </p>
                    </div>
                    <div id="realDataBadge" class="hidden bg-green-500 text-white px-3 py-1 rounded-full text-xs font-bold">
                        LIVE DATA
                    </div>
                </div>
            </div>

            <!-- XAI Explanation Section - NEW -->
            <div id="xaiSection" class="hidden bg-gradient-to-br from-purple-50 to-indigo-50 p-8 rounded-2xl shadow-xl mb-8 animate-slide-in">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                    <i class="fas fa-brain text-purple-600 mr-3"></i>
                    <span>Why This Prediction?</span>
                    <span class="ml-3 text-sm bg-purple-200 text-purple-800 px-3 py-1 rounded-full">AI Explanation</span>
                </h3>
                
                <!-- Confidence Meter -->
                <div class="mb-6">
                    <div class="flex items-center justify-between mb-2">
                        <span class="font-semibold text-gray-700">Prediction Confidence</span>
                        <span id="xaiConfidenceLevel" class="px-4 py-1 rounded-full text-sm font-bold"></span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-4 shadow-inner">
                        <div id="xaiConfidenceBar" class="h-4 rounded-full transition-all duration-1000" style="width: 0%"></div>
                    </div>
                    <p id="xaiConfidenceText" class="text-sm text-gray-600 mt-2"></p>
                </div>
                
                <!-- Feature Contributions -->
                <div class="mb-6">
                    <h4 class="font-bold text-gray-800 mb-3 flex items-center">
                        <i class="fas fa-chart-bar text-blue-600 mr-2"></i>
                        Key Factors Affecting Your Yield:
                    </h4>
                    <div id="xaiFeatureContributions" class="space-y-3"></div>
                </div>
                
                <!-- Limiting Factors -->
                <div id="xaiLimitingSection" class="mb-6 hidden">
                    <h4 class="font-bold text-red-800 mb-3 flex items-center">
                        <i class="fas fa-exclamation-triangle mr-2"></i>
                        Factors Limiting Your Yield:
                    </h4>
                    <div id="xaiLimitingFactors" class="space-y-3"></div>
                </div>
                
                <!-- Optimization Opportunities -->
                <div id="xaiOptimizationSection" class="hidden">
                    <h4 class="font-bold text-green-800 mb-3 flex items-center">
                        <i class="fas fa-lightbulb text-yellow-500 mr-2"></i>
                        How to Increase Your Yield:
                    </h4>
                    <div id="xaiOptimizationOpps" class="space-y-3"></div>
                </div>
            </div>

            <!-- Tabs Navigation -->
            <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
                <div class="flex border-b">
                    <button class="tab-button tab-active flex-1 px-6 py-4 text-center font-semibold transition" data-tab="recommendations">
                        <i class="fas fa-lightbulb mr-2"></i>
                        <span data-en="AI Recommendations" data-hi="‡§è‡§Ü‡§à ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂‡•á‡§Ç">AI Recommendations</span>
                    </button>
                    <button class="tab-button flex-1 px-6 py-4 text-center font-semibold transition" data-tab="market">
                        <i class="fas fa-chart-line mr-2"></i>
                        <span data-en="Market Analysis" data-hi="‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£">Market Analysis</span>
                    </button>
                    <button class="tab-button flex-1 px-6 py-4 text-center font-semibold transition" data-tab="comparison">
                        <i class="fas fa-balance-scale mr-2"></i>
                        <span data-en="Crop Comparison" data-hi="‡§´‡§∏‡§≤ ‡§§‡•Å‡§≤‡§®‡§æ">Crop Comparison</span>
                    </button>
                </div>

                <!-- Tab Contents -->
                <div id="tabContents" class="p-8">
                    <!-- Recommendations Tab -->
                    <div id="recommendationsTab" class="tab-content">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                            <i class="fas fa-robot text-purple-600 mr-3"></i>
                            <span data-en="AI-Powered Farming Recommendations" data-hi="‡§è‡§Ü‡§à-‡§∏‡§Ç‡§ö‡§æ‡§≤‡§ø‡§§ ‡§ï‡•É‡§∑‡§ø ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂‡•á‡§Ç">AI-Powered Farming Recommendations</span>
                        </h3>
                        
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-blue-50 border-2 border-blue-200 p-6 rounded-xl">
                                <h5 class="font-bold text-blue-800 mb-4 flex items-center text-lg">
                                    <i class="fas fa-tint mr-2"></i>
                                    <span data-en="Irrigation Management" data-hi="‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®">Irrigation Management</span>
                                </h5>
                                <div id="irrigationRecs" class="space-y-3"></div>
                            </div>
                            
                            <div class="bg-green-50 border-2 border-green-200 p-6 rounded-xl">
                                <h5 class="font-bold text-green-800 mb-4 flex items-center text-lg">
                                    <i class="fas fa-leaf mr-2"></i>
                                    <span data-en="Fertilization Strategy" data-hi="‡§â‡§∞‡•ç‡§µ‡§∞‡§ï ‡§∞‡§£‡§®‡•Ä‡§§‡§ø">Fertilization Strategy</span>
                                </h5>
                                <div id="fertilizationRecs" class="space-y-3"></div>
                            </div>
                            
                            <div class="bg-red-50 border-2 border-red-200 p-6 rounded-xl">
                                <h5 class="font-bold text-red-800 mb-4 flex items-center text-lg">
                                    <i class="fas fa-bug mr-2"></i>
                                    <span data-en="Pest & Disease Control" data-hi="‡§ï‡•Ä‡§ü ‡§î‡§∞ ‡§∞‡•ã‡§ó ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£">Pest & Disease Control</span>
                                </h5>
                                <div id="pestControlRecs" class="space-y-3"></div>
                            </div>
                            
                            <div class="bg-purple-50 border-2 border-purple-200 p-6 rounded-xl">
                                <h5 class="font-bold text-purple-800 mb-4 flex items-center text-lg">
                                    <i class="fas fa-seedling mr-2"></i>
                                    <span data-en="General Farm Management" data-hi="‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§ñ‡•á‡§§ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®">General Farm Management</span>
                                </h5>
                                <div id="generalRecs" class="space-y-3"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Market Analysis Tab -->
                    <div id="marketTab" class="tab-content hidden">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                            <i class="fas fa-chart-line text-green-600 mr-3"></i>
                            <span data-en="Market Intelligence & Trends" data-hi="‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§¨‡•Å‡§¶‡•ç‡§ß‡§ø‡§Æ‡§§‡•ç‡§§‡§æ ‡§î‡§∞ ‡§∞‡•Å‡§ù‡§æ‡§®">Market Intelligence & Trends</span>
                        </h3>
                        
                        <!-- Market Status Cards -->
                        <div class="grid md:grid-cols-3 gap-6 mb-8">
                            <div class="gradient-green text-white p-6 rounded-xl shadow-lg">
                                <i class="fas fa-rupee-sign text-3xl mb-3 opacity-80"></i>
                                <h4 class="text-sm font-semibold opacity-90" data-en="Current Market Price" data-hi="‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø">Current Market Price</h4>
                                <p id="currentPrice" class="text-3xl font-bold mt-2">‚Çπ --/quintal</p>
                            </div>
                            
                            <div class="gradient-amber text-white p-6 rounded-xl shadow-lg">
                                <i class="fas fa-balance-scale text-3xl mb-3 opacity-80"></i>
                                <h4 class="text-sm font-semibold opacity-90" data-en="Demand Level" data-hi="‡§Æ‡§æ‡§Ç‡§ó ‡§∏‡•ç‡§§‡§∞">Demand Level</h4>
                                <p id="demandLevel" class="text-3xl font-bold mt-2">--</p>
                            </div>
                            
                            <div class="gradient-blue text-white p-6 rounded-xl shadow-lg">
                                <i class="fas fa-trending-up text-3xl mb-3 opacity-80"></i>
                                <h4 class="text-sm font-semibold opacity-90" data-en="Market Sentiment" data-hi="‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§≠‡§æ‡§µ‡§®‡§æ">Market Sentiment</h4>
                                <p id="marketSentiment" class="text-3xl font-bold mt-2">--</p>
                            </div>
                        </div>

                        <!-- Monthly Trends -->
                        <div class="mb-8">
                            <h4 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                                <i class="fas fa-calendar-alt text-blue-600 mr-2"></i>
                                <span data-en="12-Month Price Trends" data-hi="12-‡§Æ‡§π‡•Ä‡§®‡•á ‡§ï‡•Ä ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§™‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø‡§Ø‡§æ‡§Ç">12-Month Price Trends</span>
                            </h4>
                            <div id="monthlyTrends" class="grid md:grid-cols-4 lg:grid-cols-6 gap-3"></div>
                        </div>

                        <!-- Future Outlook -->
                        <div class="mb-8">
                            <h4 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                                <i class="fas fa-crystal-ball text-purple-600 mr-2"></i>
                                <span data-en="Future Market Outlook" data-hi="‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§ï‡•á ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§ï‡§æ ‡§¶‡•É‡§∑‡•ç‡§ü‡§ø‡§ï‡•ã‡§£">Future Market Outlook</span>
                            </h4>
                            <div class="grid md:grid-cols-3 gap-6">
                                <div class="bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-xl border-2 border-blue-200">
                                    <div class="flex items-center mb-3">
                                        <div class="bg-blue-500 text-white w-10 h-10 rounded-full flex items-center justify-center mr-3">
                                            <span class="font-bold">3M</span>
                                        </div>
                                        <h5 class="font-bold text-gray-800" data-en="Next 3 Months" data-hi="‡§Ö‡§ó‡§≤‡•á 3 ‡§Æ‡§π‡•Ä‡§®‡•á">Next 3 Months</h5>
                                    </div>
                                    <p id="outlook3Months" class="text-sm text-gray-700">--</p>
                                </div>
                                <div class="bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-xl border-2 border-purple-200">
                                    <div class="flex items-center mb-3">
                                        <div class="bg-purple-500 text-white w-10 h-10 rounded-full flex items-center justify-center mr-3">
                                            <span class="font-bold">6M</span>
                                        </div>
                                        <h5 class="font-bold text-gray-800" data-en="Next 6 Months" data-hi="‡§Ö‡§ó‡§≤‡•á 6 ‡§Æ‡§π‡•Ä‡§®‡•á">Next 6 Months</h5>
                                    </div>
                                    <p id="outlook6Months" class="text-sm text-gray-700">--</p>
                                </div>
                                <div class="bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-xl border-2 border-green-200">
                                    <div class="flex items-center mb-3">
                                        <div class="bg-green-500 text-white w-10 h-10 rounded-full flex items-center justify-center mr-3">
                                            <span class="font-bold">12M</span>
                                        </div>
                                        <h5 class="font-bold text-gray-800" data-en="Next 12 Months" data-hi="‡§Ö‡§ó‡§≤‡•á 12 ‡§Æ‡§π‡•Ä‡§®‡•á">Next 12 Months</h5>
                                    </div>
                                    <p id="outlook12Months" class="text-sm text-gray-700">--</p>
                                </div>
                            </div>
                        </div>

                        <!-- Market Strategies -->
                        <div class="grid md:grid-cols-2 gap-6 mb-8">
                            <div class="bg-green-50 border-2 border-green-200 p-6 rounded-xl">
                                <h5 class="font-bold text-green-800 mb-3 flex items-center">
                                    <i class="fas fa-clock mr-2"></i>
                                    <span data-en="Optimal Selling Time" data-hi="‡§∏‡§∞‡•ç‡§µ‡•ã‡§§‡•ç‡§§‡§Æ ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä ‡§∏‡§Æ‡§Ø">Optimal Selling Time</span>
                                </h5>
                                <p id="optimalSellingTime" class="text-gray-700">--</p>
                            </div>
                            <div class="bg-blue-50 border-2 border-blue-200 p-6 rounded-xl">
                                <h5 class="font-bold text-blue-800 mb-3 flex items-center">
                                    <i class="fas fa-lightbulb mr-2"></i>
                                    <span data-en="Market Strategies" data-hi="‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§∞‡§£‡§®‡•Ä‡§§‡§ø‡§Ø‡§æ‡§Ç">Market Strategies</span>
                                </h5>
                                <ul id="marketStrategies" class="text-gray-700 space-y-2"></ul>
                            </div>
                        </div>

                        <!-- Trending Crops -->
                        <h4 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                            <i class="fas fa-fire text-red-600 mr-2"></i>
                            <span data-en="Regional Crop Trends" data-hi="‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•Ä‡§Ø ‡§´‡§∏‡§≤ ‡§∞‡•Å‡§ù‡§æ‡§®">Regional Crop Trends</span>
                        </h4>
                        <div class="grid md:grid-cols-3 gap-6">
                            <div class="bg-green-50 border-2 border-green-200 p-6 rounded-xl">
                                <h5 class="font-bold text-green-800 mb-4 flex items-center">
                                    <i class="fas fa-arrow-up mr-2"></i>
                                    <span data-en="Currently Trending" data-hi="‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§≤‡•ã‡§ï‡§™‡•ç‡§∞‡§ø‡§Ø">Currently Trending</span>
                                </h5>
                                <div id="currentTrendingCrops" class="space-y-3"></div>
                            </div>
                            <div class="bg-blue-50 border-2 border-blue-200 p-6 rounded-xl">
                                <h5 class="font-bold text-blue-800 mb-4 flex items-center">
                                    <i class="fas fa-rocket mr-2"></i>
                                    <span data-en="Future Potential" data-hi="‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§ï‡•Ä ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§®‡§æ">Future Potential</span>
                                </h5>
                                <div id="futureTrendingCrops" class="space-y-3"></div>
                            </div>
                            <div class="bg-red-50 border-2 border-red-200 p-6 rounded-xl">
                                <h5 class="font-bold text-red-800 mb-4 flex items-center">
                                    <i class="fas fa-arrow-down mr-2"></i>
                                    <span data-en="Declining Demand" data-hi="‡§ò‡§ü‡§§‡•Ä ‡§Æ‡§æ‡§Ç‡§ó">Declining Demand</span>
                                </h5>
                                <div id="decliningCrops" class="space-y-3"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Crop Comparison Tab -->
                    <div id="comparisonTab" class="tab-content hidden">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                            <i class="fas fa-balance-scale text-orange-600 mr-3"></i>
                            <span data-en="Crop Profitability Comparison" data-hi="‡§´‡§∏‡§≤ ‡§≤‡§æ‡§≠‡§™‡•ç‡§∞‡§¶‡§§‡§æ ‡§§‡•Å‡§≤‡§®‡§æ">Crop Profitability Comparison</span>
                        </h3>
                        
                        <div id="primaryCropCard" class="mb-8"></div>
                        
                        <h4 class="text-lg font-bold text-gray-800 mb-4" data-en="Alternative Crops to Consider" data-hi="‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ï‡§∞‡§®‡•á ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï ‡§´‡§∏‡§≤‡•á‡§Ç">
                            Alternative Crops to Consider
                        </h4>
                        <div id="alternativeCrops" class="grid md:grid-cols-3 gap-6"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12 mt-16">
        <div class="container mx-auto px-6">
            <div class="grid md:grid-cols-4 gap-8 mb-8">
                <div>
                    <div class="flex items-center space-x-2 mb-4">
                        <i class="fas fa-seedling text-2xl text-green-400"></i>
                        <h3 class="text-xl font-bold">Krishi AI</h3>
                    </div>
                    <p class="text-gray-400 text-sm">Empowering farmers with AI-driven insights and market intelligence for better agricultural outcomes.</p>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Features</h4>
                    <ul class="space-y-2 text-sm text-gray-400">
                        <li>‚Ä¢ Yield Prediction</li>
                        <li>‚Ä¢ Market Analysis</li>
                        <li>‚Ä¢ AI Recommendations</li>
                        <li>‚Ä¢ Crop Comparison</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Coverage</h4>
                    <ul class="space-y-2 text-sm text-gray-400">
                        <li>‚Ä¢ Odisha</li>
                        <li>‚Ä¢ Andhra Pradesh</li>
                        <li>‚Ä¢ Telangana</li>
                        <li>‚Ä¢ More states coming soon</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Technology</h4>
                    <ul class="space-y-2 text-sm text-gray-400">
                        <li>‚Ä¢ Machine Learning</li>
                        <li>‚Ä¢ Groq AI Integration</li>
                        <li>‚Ä¢ Real-time Data Analysis</li>
                        <li>‚Ä¢ Market Intelligence</li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-800 pt-8 text-center text-gray-400 text-sm">
                <p>&copy; 2026 Krishi AI. Built with real agricultural data and advanced AI technology.</p>
            </div>
        </div>
    </footer>

    <!-- Notification Container -->
    <div id="notificationContainer"></div>

    <script>
        // State Management
        let currentLanguage = 'en';
        let currentTab = 'recommendations';

        // Language Toggle
        document.getElementById('langToggle').addEventListener('click', () => {
            currentLanguage = currentLanguage === 'en' ? 'hi' : 'en';
            updateLanguage();
            showNotification('Language changed to ' + (currentLanguage === 'en' ? 'English' : '‡§π‡§ø‡§Ç‡§¶‡•Ä'), 'info');
        });

        function updateLanguage() {
            document.querySelectorAll('[data-en][data-hi]').forEach(el => {
                el.textContent = el.getAttribute(`data-${currentLanguage}`);
            });
        }

        // Tab Management
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', () => {
                const tabName = button.getAttribute('data-tab');
                switchTab(tabName);
            });
        });

        function switchTab(tabName) {
            // Update buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('tab-active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('tab-active');

            // Update content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            document.getElementById(`${tabName}Tab`).classList.remove('hidden');
            
            currentTab = tabName;
        }

        // Location Services
        document.getElementById('getCurrentLocation').addEventListener('click', () => {
            const statusEl = document.getElementById('locationStatus');
            statusEl.innerHTML = '<i class="fas fa-spinner fa-spin text-blue-500"></i> Getting location...';
            
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        document.getElementById('latitude').value = position.coords.latitude.toFixed(6);
                        document.getElementById('longitude').value = position.coords.longitude.toFixed(6);
                        statusEl.innerHTML = '<i class="fas fa-check-circle text-green-500"></i> Location obtained successfully!';
                        showNotification('Location retrieved successfully', 'success');
                        setTimeout(() => statusEl.innerHTML = '', 3000);
                    },
                    (error) => {
                        statusEl.innerHTML = '<i class="fas fa-exclamation-circle text-red-500"></i> Unable to get location';
                        showNotification('Unable to get location. Please enter manually.', 'error');
                        setTimeout(() => statusEl.innerHTML = '', 3000);
                    }
                );
            } else {
                statusEl.innerHTML = '<i class="fas fa-exclamation-circle text-red-500"></i> Geolocation not supported';
                showNotification('Geolocation is not supported by your browser', 'error');
            }
        });

        // Form Submission
        document.getElementById('predictionForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData.entries());
            
            // Show loading
            document.getElementById('loadingIndicator').classList.remove('hidden');
            document.getElementById('predictBtn').disabled = true;
            updateProgressBar(20);
            
            try {
                updateProgressBar(40);
                const response = await fetch('/api/predict', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                
                updateProgressBar(70);
                const result = await response.json();
                
                if (result.success) {
                    updateProgressBar(100);
                    displayResults(result);
                    document.getElementById('resultsSection').classList.remove('hidden');
                    document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
                    showNotification('Analysis completed successfully!', 'success');
                } else {
                    showNotification('Error: ' + (result.error || 'Unable to generate prediction'), 'error');
                }
            } catch (error) {
                console.error('Error:', error);
                showNotification('Network error. Please check your connection and try again.', 'error');
            } finally {
                document.getElementById('loadingIndicator').classList.add('hidden');
                document.getElementById('predictBtn').disabled = false;
                setTimeout(() => updateProgressBar(0), 500);
            }
        });

        // Display Results
        function displayResults(result) {
            // Basic stats
            document.getElementById('yieldPerHectare').textContent = `${result.predicted_yield_per_hectare} quintals`;
            document.getElementById('totalProduction').textContent = `${result.total_expected_production} quintals`;
            
            const estimatedValue = result.estimated_revenue || 0;
            document.getElementById('estimatedValue').textContent = `‚Çπ ${estimatedValue.toLocaleString('en-IN')}`;
            
            // NEW: Display XAI explanation
            if (result.prediction_explanation) {
                displayXAIExplanation(result.prediction_explanation);
            }
            
            // NEW: Display real market data info
            if (result.market_analysis) {
                displayRealMarketDataInfo(result.market_analysis);
            }
            
            // Display all sections
            displayRecommendations(result.recommendations);
            displayMarketAnalysis(result.market_analysis);
            displayCropComparison(result.crop_comparison);
        }

        // =================================================================
        // NEW: XAI Display Functions
        // =================================================================
        
        function displayXAIExplanation(explanation) {
            const xaiSection = document.getElementById('xaiSection');
            xaiSection.classList.remove('hidden');
            
            // Confidence
            const confidence = explanation.confidence || {};
            const confidenceScore = confidence.confidence_score || 70;
            const confidenceLevel = confidence.confidence_level || 'moderate';
            
            const confidenceBar = document.getElementById('xaiConfidenceBar');
            confidenceBar.style.width = confidenceScore + '%';
            
            // Color based on confidence
            if (confidenceLevel === 'high') {
                confidenceBar.className = 'bg-gradient-to-r from-green-400 to-green-600 h-4 rounded-full transition-all duration-1000';
            } else if (confidenceLevel === 'moderate') {
                confidenceBar.className = 'bg-gradient-to-r from-yellow-400 to-orange-500 h-4 rounded-full transition-all duration-1000';
            } else {
                confidenceBar.className = 'bg-gradient-to-r from-red-400 to-red-600 h-4 rounded-full transition-all duration-1000';
            }
            
            document.getElementById('xaiConfidenceLevel').textContent = confidenceLevel.toUpperCase();
            document.getElementById('xaiConfidenceLevel').className = `px-4 py-1 rounded-full text-sm font-bold ${
                confidenceLevel === 'high' ? 'bg-green-500 text-white' :
                confidenceLevel === 'moderate' ? 'bg-yellow-500 text-white' :
                'bg-red-500 text-white'
            }`;
            document.getElementById('xaiConfidenceText').textContent = confidence.explanation || '';
            
            // Feature Contributions
            const contributions = explanation.feature_contributions || [];
            if (contributions.length > 0) {
                const contributionsEl = document.getElementById('xaiFeatureContributions');
                contributionsEl.innerHTML = contributions.map(feature => `
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 ${
                        feature.impact === 'positive' ? 'border-green-500' :
                        feature.impact === 'neutral' ? 'border-yellow-500' :
                        'border-red-500'
                    }">
                        <div class="flex items-start justify-between mb-2">
                            <div class="flex-1">
                                <span class="font-semibold text-gray-800">${feature.feature_name}</span>
                                <div class="text-xs text-gray-600 mt-1">
                                    Current: <span class="font-medium">${feature.value}</span> 
                                    <span class="mx-2">‚Ä¢</span>
                                    Optimal: <span class="font-medium">${feature.optimal_range}</span>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="font-bold text-lg ${
                                    feature.impact === 'positive' ? 'text-green-600' :
                                    feature.impact === 'neutral' ? 'text-yellow-600' :
                                    'text-red-600'
                                }">
                                    ${feature.contribution_score}%
                                </div>
                                <div class="text-xs text-gray-500 uppercase">${feature.status.replace('_', ' ')}</div>
                            </div>
                        </div>
                        <p class="text-sm text-gray-600 mt-2">${feature.explanation}</p>
                    </div>
                `).join('');
            }
            
            // Limiting Factors
            const limitingFactors = explanation.limiting_factors || [];
            if (limitingFactors.length > 0) {
                document.getElementById('xaiLimitingSection').classList.remove('hidden');
                const limitingEl = document.getElementById('xaiLimitingFactors');
                limitingEl.innerHTML = limitingFactors.map(factor => `
                    <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-500 shadow-sm">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-semibold text-red-800">${factor.factor}</span>
                            <span class="px-3 py-1 text-xs rounded-full font-bold ${
                                factor.severity === 'high' ? 'bg-red-200 text-red-900' :
                                factor.severity === 'medium' ? 'bg-orange-200 text-orange-900' :
                                'bg-yellow-200 text-yellow-900'
                            }">
                                ${factor.severity.toUpperCase()}
                            </span>
                        </div>
                        <div class="text-sm text-gray-700 mb-3">
                            <div class="flex items-start mb-2">
                                <i class="fas fa-chart-line text-red-600 mt-1 mr-2"></i>
                                <span>${factor.impact_on_yield}</span>
                            </div>
                        </div>
                        <div class="bg-white p-3 rounded-lg mt-2">
                            <div class="flex items-start">
                                <i class="fas fa-tools text-green-600 mt-1 mr-2"></i>
                                <div>
                                    <span class="font-semibold text-sm text-gray-800">Recommended Action:</span>
                                    <p class="text-sm text-gray-700 mt-1">${factor.recommendation}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
            
            // Optimization Opportunities
            const optimizations = explanation.optimization_opportunities || [];
            if (optimizations.length > 0) {
                document.getElementById('xaiOptimizationSection').classList.remove('hidden');
                const optEl = document.getElementById('xaiOptimizationOpps');
                optEl.innerHTML = optimizations.map(opp => `
                    <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-500 shadow-sm hover:shadow-md transition">
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex-1">
                                <span class="font-semibold text-green-900">${opp.area}</span>
                                <div class="text-xs text-gray-600 mt-1">Priority: ${opp.priority.toUpperCase()}</div>
                            </div>
                            <div class="bg-green-600 text-white px-4 py-2 rounded-lg font-bold text-lg">
                                +${opp.potential_yield_gain}
                            </div>
                        </div>
                        <p class="text-sm text-gray-700 mt-2">${opp.action}</p>
                    </div>
                `).join('');
            }
        }
        
        function displayRealMarketDataInfo(marketAnalysis) {
            if (marketAnalysis?.price_data_source) {
                document.getElementById('priceDataSource').textContent = marketAnalysis.price_data_source;
                document.getElementById('priceLastUpdated').textContent = 
                    'Updated: ' + new Date(marketAnalysis.price_last_updated).toLocaleString();
                
                // Show "LIVE DATA" badge if using real data
                if (marketAnalysis.real_time_prices && marketAnalysis.price_data_source.includes('AGMARKNET')) {
                    document.getElementById('realDataBadge').classList.remove('hidden');
                }
            }
        }

        // Display Recommendations
        function displayRecommendations(recommendations) {
            const categories = {
                'irrigationRecs': recommendations.irrigation || [],
                'fertilizationRecs': recommendations.fertilization || [],
                'pestControlRecs': recommendations.pestControl || [],
                'generalRecs': recommendations.general || []
            };
            
            Object.entries(categories).forEach(([containerId, recs]) => {
                const container = document.getElementById(containerId);
                
                if (recs.length === 0) {
                    container.innerHTML = '<p class="text-gray-500 text-sm italic">No specific recommendations available</p>';
                    return;
                }
                
                container.innerHTML = recs.map(rec => `
                    <div class="priority-${rec.priority} p-3 rounded-lg">
                        <div class="flex items-start space-x-2">
                            <i class="fas fa-circle text-xs mt-1 ${getPriorityColor(rec.priority)}"></i>
                            <div class="flex-1">
                                <p class="font-semibold text-sm text-gray-800">${rec.action}</p>
                                <p class="text-xs text-gray-600 mt-1">${rec.details}</p>
                                <span class="inline-block mt-1 px-2 py-0.5 text-xs rounded-full ${getPriorityBadge(rec.priority)}">
                                    ${rec.priority.toUpperCase()}
                                </span>
                            </div>
                        </div>
                    </div>
                `).join('');
            });
        }

        // Display Market Analysis
        function displayMarketAnalysis(marketAnalysis) {
            if (!marketAnalysis) return;

            // Current status
            if (marketAnalysis.current_status) {
                const priceRange = marketAnalysis.current_status.price_range || {};
                document.getElementById('currentPrice').textContent = `‚Çπ ${priceRange.current || '--'}/quintal`;
                document.getElementById('demandLevel').textContent = (marketAnalysis.current_status.demand_level || 'N/A').toUpperCase();
                document.getElementById('marketSentiment').textContent = (marketAnalysis.current_status.market_sentiment || 'N/A').toUpperCase();
            }

            // Monthly trends
            if (marketAnalysis.monthly_trends?.length > 0) {
                const container = document.getElementById('monthlyTrends');
                container.innerHTML = marketAnalysis.monthly_trends.slice(0, 12).map(trend => `
                    <div class="bg-white border-2 border-gray-200 p-3 rounded-lg hover:shadow-md transition">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-bold text-gray-800 text-sm">${trend.month}</span>
                            <span class="${getTrendColor(trend.trend)}">${getTrendIcon(trend.trend)}</span>
                        </div>
                        <p class="text-xs text-gray-600 line-clamp-2">${trend.description || trend.trend}</p>
                    </div>
                `).join('');
            }

            // Future outlook
            if (marketAnalysis.future_outlook) {
                document.getElementById('outlook3Months').textContent = marketAnalysis.future_outlook.next_3_months || marketAnalysis.future_outlook.summary || '--';
                document.getElementById('outlook6Months').textContent = marketAnalysis.future_outlook.next_6_months || '--';
                document.getElementById('outlook12Months').textContent = marketAnalysis.future_outlook.next_12_months || '--';
            }

            // Market recommendations
            if (marketAnalysis.recommendations) {
                document.getElementById('optimalSellingTime').textContent = marketAnalysis.recommendations.optimal_selling_time || 'Not available';
                
                const strategiesEl = document.getElementById('marketStrategies');
                const strategies = marketAnalysis.recommendations.market_strategies || [];
                strategiesEl.innerHTML = strategies.length > 0 
                    ? strategies.map(s => `<li class="flex items-start"><i class="fas fa-check-circle text-blue-600 mr-2 mt-0.5"></i><span>${s}</span></li>`).join('')
                    : '<li class="text-gray-500 italic">No specific strategies available</li>';
            }

            // Trending crops
            if (marketAnalysis.trending_crops) {
                displayTrendingCrops(marketAnalysis.trending_crops);
            }
        }

        // Display Trending Crops
        function displayTrendingCrops(trendingCrops) {
            const sections = [
                { id: 'currentTrendingCrops', data: trendingCrops.current_trending || [], color: 'green' },
                { id: 'futureTrendingCrops', data: trendingCrops.future_trending || [], color: 'blue' },
                { id: 'decliningCrops', data: trendingCrops.declining_crops || [], color: 'red' }
            ];

            sections.forEach(({ id, data, color }) => {
                const container = document.getElementById(id);
                container.innerHTML = data.length > 0
                    ? data.map(crop => `
                        <div class="bg-white p-3 rounded-lg border border-${color}-200">
                            <div class="font-bold text-${color}-800 capitalize mb-1">${crop.crop}</div>
                            <div class="text-xs text-gray-600">${crop.reason}</div>
                        </div>
                    `).join('')
                    : '<p class="text-sm text-gray-500 italic">No data available</p>';
            });
        }

        // Display Crop Comparison
        function displayCropComparison(cropComparison) {
            if (!cropComparison) return;

            // Primary crop
            if (cropComparison.primary_crop) {
                const crop = cropComparison.primary_crop;
                const priceInfo = crop.price_info || {};
                const score = crop.market_score || 5;
                
                document.getElementById('primaryCropCard').innerHTML = `
                    <div class="bg-gradient-to-br from-green-100 to-green-200 border-2 border-green-300 p-6 rounded-xl">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <div class="text-sm text-green-700 font-semibold mb-1">YOUR SELECTED CROP</div>
                                <h5 class="text-2xl font-bold text-green-900 capitalize">${crop.name}</h5>
                            </div>
                            <div class="bg-green-600 text-white px-4 py-2 rounded-full font-bold flex items-center space-x-1">
                                <i class="fas fa-star"></i>
                                <span>${score}/10</span>
                            </div>
                        </div>
                        <div class="grid grid-cols-3 gap-4 mb-4">
                            <div class="bg-white bg-opacity-60 p-3 rounded-lg">
                                <div class="text-xs text-gray-600 mb-1">Current Price</div>
                                <div class="font-bold text-gray-800">‚Çπ${priceInfo.current || '--'}</div>
                            </div>
                            <div class="bg-white bg-opacity-60 p-3 rounded-lg">
                                <div class="text-xs text-gray-600 mb-1">Min Price</div>
                                <div class="font-bold text-gray-800">‚Çπ${priceInfo.min || '--'}</div>
                            </div>
                            <div class="bg-white bg-opacity-60 p-3 rounded-lg">
                                <div class="text-xs text-gray-600 mb-1">Max Price</div>
                                <div class="font-bold text-gray-800">‚Çπ${priceInfo.max || '--'}</div>
                            </div>
                        </div>
                        <div class="market-score-bar">
                            <div class="score-indicator" style="left: calc(${(score/10) * 100}% - 3px)"></div>
                        </div>
                    </div>
                `;
            }

            // Alternative crops
            const alternatives = cropComparison.alternatives || [];
            const container = document.getElementById('alternativeCrops');
            
            if (alternatives.length > 0) {
                container.innerHTML = alternatives.map(crop => {
                    const priceInfo = crop.price_info || {};
                    const score = crop.market_score || 5;
                    const recommendation = crop.recommendation || 'Consider based on local conditions';
                    
                    return `
                        <div class="bg-white border-2 border-gray-200 p-5 rounded-xl hover:border-blue-400 hover:shadow-lg transition card-hover">
                            <div class="flex items-center justify-between mb-3">
                                <h6 class="font-bold text-lg text-gray-800 capitalize">${crop.name}</h6>
                                <div class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-bold">
                                    ${score}/10
                                </div>
                            </div>
                            <div class="space-y-2 mb-3 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Current:</span>
                                    <span class="font-semibold">‚Çπ${priceInfo.current || '--'}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Range:</span>
                                    <span class="font-semibold">‚Çπ${priceInfo.min || '--'} - ${priceInfo.max || '--'}</span>
                                </div>
                            </div>
                            <div class="market-score-bar mb-3">
                                <div class="score-indicator" style="left: calc(${(score/10) * 100}% - 3px)"></div>
                            </div>
                            <div class="bg-blue-50 p-3 rounded-lg">
                                <p class="text-xs text-gray-700">${recommendation}</p>
                            </div>
                        </div>
                    `;
                }).join('');
            } else {
                container.innerHTML = '<p class="text-gray-500 text-center col-span-3 italic">No alternative crop data available</p>';
            }
        }

        // Utility Functions
        function getTrendIcon(trend) {
            const t = trend.toLowerCase();
            if (t.includes('increas') || t === 'up') return '<i class="fas fa-arrow-up"></i>';
            if (t.includes('decreas') || t === 'down') return '<i class="fas fa-arrow-down"></i>';
            return '<i class="fas fa-minus"></i>';
        }

        function getTrendColor(trend) {
            const t = trend.toLowerCase();
            if (t.includes('increas') || t === 'up') return 'trend-up';
            if (t.includes('decreas') || t === 'down') return 'trend-down';
            return 'trend-stable';
        }

        function getPriorityColor(priority) {
            const colors = { high: 'text-red-600', medium: 'text-yellow-600', low: 'text-green-600' };
            return colors[priority] || 'text-gray-600';
        }

        function getPriorityBadge(priority) {
            const badges = {
                high: 'bg-red-100 text-red-800',
                medium: 'bg-yellow-100 text-yellow-800',
                low: 'bg-green-100 text-green-800'
            };
            return badges[priority] || 'bg-gray-100 text-gray-800';
        }

        function updateProgressBar(percent) {
            document.getElementById('progressBar').style.width = percent + '%';
        }

        function showNotification(message, type = 'info') {
            const container = document.getElementById('notificationContainer');
            const colors = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                info: 'bg-blue-500',
                warning: 'bg-yellow-500'
            };
            const icons = {
                success: 'fa-check-circle',
                error: 'fa-exclamation-circle',
                info: 'fa-info-circle',
                warning: 'fa-exclamation-triangle'
            };
            
            const notification = document.createElement('div');
            notification.className = `notification ${colors[type]} text-white p-4 rounded-lg shadow-2xl flex items-center space-x-3`;
            notification.innerHTML = `
                <i class="fas ${icons[type]} text-2xl"></i>
                <span class="flex-1">${message}</span>
                <button onclick="this.parentElement.remove()" class="text-white hover:text-gray-200">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            container.appendChild(notification);
            setTimeout(() => notification.remove(), 5000);
        }

        // Initialize
        updateLanguage();
    </script>
</body>
</html>
